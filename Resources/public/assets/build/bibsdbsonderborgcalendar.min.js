/**
 * @name BibsdbSonderborgCalendarBundle
 * @version vdev
 * @link https://github.com/bibsdb/sonderborg-calendar-bundle
 */
angular.module("toolsModule").directive("sonderborgCalendarDisplayitems",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/bibsdbsonderborgcalendar/apps/toolsModule/sonderborg-calendar-displayitems.html"}}),angular.module("toolsModule").directive("sonderborgCalendarEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(o){function e(){o.newEvent={title:null,place:null,from:null,to:null,groupbydate:null,displaytime:null,mFrom:null,mTo:null}}e(),o.newEventItem=function(){console.log(o.slide.options.eventitems),o.slide.options.eventitems.push(angular.copy(o.newEvent)),e()},o.groupByHeader=function(){return"hello"},o.removeEventItem=function(e){o.slide.options.eventitems.splice(o.slide.options.eventitems.indexOf(e),1)},o.sortEvents=function(){console.log("sort"),0<o.slide.options.eventitems.length&&(o.slide.options.eventitems=$filter("orderBy")(o.slide.options.eventitems,"from"))},o.eventIsOutdated=function(e){var o=e.to,t=e.from,n=Date.now()/1e3;return o&&o<n||!o&&t<n},o.sortEvents()},templateUrl:"/bundles/bibsdbsonderborgcalendar/apps/toolsModule/sonderborg-calendar-editor.html"}}),angular.module("toolsModule").filter("groupedEvents",function(){"use strict";return function(e){if(!angular.isArray(e))return!1;var o=parseInt(Date.now()/1e3),t=[],n=[];t.push(moment().startOf("day"));for(var r=0;r<e.length;r++){(d=e[r]).from&&d.to&&d.to>=o?(d.mFrom=moment.unix(d.from),d.mTo=moment.unix(d.to),t.push(d.mTo),n.push(d)):d.from&&d.from>=o&&(d.mFrom=moment.unix(d.from),t.push(d.mFrom),n.push(d))}for(var l=moment.min(t),s=moment.max(t),m=[];l<s;){var a=l.calendar(null,{lastDay:"[I gÃ¥r]",sameDay:"[I dag]",nextDay:"[I morgen]",lastWeek:"dddd Do MMMM",nextWeek:"dddd Do MMMM",sameElse:"dddd Do MMMM"});for(r=0;r<n.length;r++){var d;(d=n[r]).from&&d.to&&l.isBetween(d.mFrom,d.mTo,"day",[])?(d.displaytime=d.mFrom.format("HH:mm")+d.mTo.format("[ - ] HH:mm"),d.groupbydate=a,m.push(d)):d.from&&l.isSame(d.mFrom,"day")&&(console.log(d.title),console.log(l.format("DD-MM-YYYY")),console.log(d.mFrom.format("DD-MM-YYYY")),console.log(d.groupbydate),d.displaytime=d.mFrom.format("HH:mm"),d.groupbydate=a,m.push(d))}l.add(1,"d")}return console.log("hej"),console.log(m[3].groupbydate),m}});